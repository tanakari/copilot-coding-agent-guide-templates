:toc: left
:toc-levels: 3
:toc-title: 目次
:sectnums:
:source-highlighter: highlightjs
:icons: font

= GitHub Copilot コーディングエージェント ユーザーガイド & テンプレート

== はじめに

このリポジトリは、*GitHub Copilot* と *AI エージェント* を使った効率的なソフトウェア開発のためのテンプレート集とサンプルプロジェクトを提供します。

=== 構成

本リポジトリは以下の2つの構成要素で成り立っています：

==== 📁 template-files（テンプレート）
* **目的**: 新しいプロジェクト作成時のひな形
* **内容**: プロジェクトの仕様に関係なくAI駆動開発で必要な基本ファイル
* **対象**: プロジェクト固有の情報は含まず、汎用的な構造とフォーマット

==== 📁 sample-files（サンプル）  
* **目的**: AI駆動開発の実践例と学習用リファレンス
* **内容**: 実際のアプリケーション開発を通じたAI開発プロセス全体の体験
* **対象**: メンバー管理システムを題材とした具体的な実装例

=== 使い分け

[cols="1,2,2", options="header"]
|===
|用途 |template-files |sample-files

|新プロジェクト開始
|✅ ひな形をコピーして[括弧]部分を編集
|❌ 参考のみ

|AI開発手法学習
|❌ 構造のみで内容不足
|✅ 具体的な仕様で実践的学習

|開発プロセス理解
|△ 基本的な流れのみ
|✅ 完全なワークフロー体験

|プロジェクト固有情報
|⚪ [括弧]表記でプレースホルダ
|⚪ メンバー管理システムの具体例
|===

GitHub Copilot コーディングエージェントは、AIを活用してコードの提案・実装を行い、開発者の生産性を大幅に向上させるツールです。
簡単に言うと、*IssueにCopilotをアサインすると、Copilotが自動的にコードを実装してPull Requestを作成します*。

[TIP]
====
AI駆動開発では、適切なドキュメント整備がAIの性能を大きく左右します。
このガイドに従って環境を整備することで、効果的なAI開発パートナーシップを構築できます。
====

== 前提条件

* GitHubアカウントを持っていること
* 基本的なGitの操作知識があること
* プログラミングの基礎知識があること

== template-filesを使った新規プロジェクトの開始

**新しいプロジェクトでAI駆動開発を始める場合** は、`template-files/` を使用してください。

=== Step 1: テンプレートファイルのコピー

```bash
# 新しいプロジェクトディレクトリ作成
mkdir your-new-project
cd your-new-project

# テンプレートファイルをコピー
cp -r /path/to/template-files/* .
```

=== Step 2: プロジェクト固有情報の設定

以下のファイルを編集してプロジェクト固有の情報を設定：

[cols="2,3,5", options="header"]
|===
|ファイル |設定項目 |説明

|`README.md`
|プロジェクト名、概要、技術スタック
|AIが理解するプロジェクト基本情報

|`SETUP.md`
|環境構築手順、必須ツール
|開発環境のセットアップガイド

|`specs/`
|API仕様、UI仕様、DB設計
|AIが実装に使用する詳細仕様

|`docs/stack.md`
|技術スタック詳細
|使用技術の選定理由と制約
|===

=== Step 3: AI開発開始

1. GitHubリポジトリ作成
2. ファイルをpush
3. GitHub Copilot設定
4. 最初のIssue作成でAI開発開始

== sample-filesを使った実践的AI開発体験

**実際にアプリケーションを動作させながらAI開発を体験したい場合** は、以下の手順でお試しください。

=== Step 1: 環境準備

**必要なツール**
```bash
# Java 21以上のインストール確認
java --version

# Maven 3.8以上のインストール確認  
mvn --version

# Git確認
git --version
```

=== Step 2: プロジェクト準備

```bash
# 1. このリポジトリをフォーク（GitHubのWebページで）
# 2. フォークしたリポジトリをクローン
git clone https://github.com/[YOUR_USERNAME]/copilot-coding-agent-guide-templates.git
cd copilot-coding-agent-guide-templates

# 3. 新しいブランチでお試し開始
git checkout -b member-management-trial

# 4. sample-filesを作業ディレクトリにコピー（隠しファイルも含む）
cp -r sample-files member-management
cd member-management

# 5. GitHubテンプレートファイルが正しくコピーされているか確認
ls -la .github/
# 以下のファイルが存在することを確認:
# - pull_request_template.md
# - ISSUE_TEMPLATE/ ディレクトリ
```

[NOTE]
====
**隠しファイル・ディレクトリのコピーについて**

- **Linux/macOS**: `cp -r` で `.github` ディレクトリも自動的にコピーされます
- **Windows**: PowerShellの場合は `Copy-Item -Recurse -Force sample-files member-management` を使用
- **Git Bash (Windows)**: `cp -r` が使用可能

**コピー後の確認が重要:**
`.github/pull_request_template.md` が存在しない場合は、手動でコピーしてください：
```bash
# 手動コピーが必要な場合
cp -r ../sample-files/.github .
```
====

=== Step 3: 基本プロジェクト構造の作成

**最初に必要なディレクトリ構造のみ手動で作成:**

```bash
# Javaプロジェクト構造作成
mkdir -p src/main/java/com/example/member/management
mkdir -p src/main/resources
mkdir -p src/test/java/com/example/member/management

# 変更をコミット
git add .
git commit -m "Initial directory structure for member management"

# GitHubにプッシュ
git push origin member-management-trial
```

=== Step 4: AI開発でプロジェクト設定作成を依頼

**GitHub上で最初のIssue作成（プロジェクト設定 + メインApplicationクラス）:**

```markdown
タイトル: Spring Bootプロジェクト基盤の作成（Maven設定 + メインクラス）

説明:
メンバー管理システム用のSpring Bootプロジェクト基盤を作成してください。

参照仕様:
- docs/stack.md (技術スタック仕様)
- docs/specs/db/database-design.md (データベース仕様)

作成ファイル:
1. pom.xml - Maven設定
2. src/main/resources/application.yml - アプリケーション設定
3. src/main/java/com/example/member/management/MemberManagementApplication.java - メインクラス

実装要件:
- Spring Boot 3.3.x以上
- Java 21対応
- Spring Data JPA
- H2データベース（開発用）
- Web starter
- テスト用依存関係
- @SpringBootApplicationアノテーション付きメインクラス

完了条件:
- [ ] pom.xmlの作成（適切な依存関係設定）
- [ ] application.ymlの作成（H2データベース設定）
- [ ] MemberManagementApplicationクラスの作成
- [ ] mvn clean compileが成功すること
- [ ] Spring Bootアプリケーションが起動すること
- [ ] http://localhost:8080 でアクセス可能なこと
```

**CopilotをIssueにアサイン後、PRが作成されるまで待機**

=== Step 5: Copilotチャットで段階的DDD開発体験

**GitHub CopilotチャットでIssue作成から開発まで体験:**

基本プロジェクトが動作したら、GitHub CopilotチャットでIssue作成から実際の開発までを体験します。

[NOTE]
====
**@workspace について**

`@workspace` は GitHub Copilot のコンテキスト参照機能です：
- **効果**: プロジェクト全体のファイル（仕様書、設定、既存コード）を自動的に参照
- **利点**: 仕様書の内容を理解した上で適切なコードを生成
- **使用方法**: チャット冒頭に `@workspace` を付けるだけ

例: `@workspace メンバーエンティティのIssueを作成してください`
====

==== 5.1 メンバーエンティティ開発

**Copilotチャットで以下のように依頼:**

```
@workspace メンバーエンティティのIssueを作成してください。

**レイヤー**: [Domain] ドメイン層
**優先度**: High
**参照仕様**: docs/specs/db/database-design.md
```

**Copilotがレスポンスしたら、そのIssueを実際に作成し、再度Copilotにアサインして実装を依頼**

==== 5.2 リポジトリ実装

**Copilotチャットで以下のように依頼:**

```
@workspace メンバーリポジトリのIssueを作成してください。

**レイヤー**: [Repository] リポジトリ層
**優先度**: Medium
**参照仕様**: docs/specs/db/database-design.md
**依存関係**: Memberエンティティ
```

==== 5.3 アプリケーションサービス実装

**Copilotチャットで以下のように依頼:**

```
@workspace メンバー管理のアプリケーションサービスのIssueを作成してください。

**レイヤー**: [Service] アプリケーションサービス層
**優先度**: High
**参照仕様**: docs/specs/api/members/list.md、docs/specs/api/members/create.md
```

==== 5.4 API コントローラー実装

**Copilotチャットで以下のように依頼:**

```
@workspace メンバー管理APIコントローラーのIssueを作成してください。

**レイヤー**: [API] コントローラー層
**優先度**: Medium
**参照仕様**: docs/specs/api/members/list.md、docs/specs/api/members/create.md
```
- エラーレスポンスの統一

これまでに作成したアプリケーションサービスを使用した実装でお願いします。
```

[TIP]
====
**@workspace 活用のコツ**

- **最初は@workspaceなし**: シンプルな依頼から始める
- **詳細が必要な時**: `@workspace` を付けてプロジェクト全体を参照
- **段階的レベルアップ**: 慣れてきたら `@workspace` で効率化

**レベル別使い分け:**
- **初心者**: `メンバーエンティティのIssueを作成してください`  
- **中級者**: `@workspace メンバーエンティティのIssueを作成してください`
- **上級者**: `@workspace` + 詳細な技術要件を組み合わせ
====

==== 5.5 開発フロー体験

各ステップで以下の流れを体験します：

```mermaid
flowchart LR
    A[Copilotチャット相談] --> B[Issue作成依頼]
    B --> C[Issue作成]
    C --> D[Copilotアサイン]
    D --> E[自動実装]
    E --> F[PR作成]
    F --> G[レビュー]
    G --> H[マージ]
    H --> I[次の機能へ]
```

=== Step 6: アプリケーション動作確認

```bash
# アプリケーション起動
mvn spring-boot:run

# ブラウザでアクセス
# http://localhost:8080/api/members
# http://localhost:8080/h2-console (データベース確認)
```

**体験できる機能:**
- メンバー一覧API (`GET /api/members`)
- メンバー作成API (`POST /api/members`)  
- メンバー詳細API (`GET /api/members/{id}`)
- H2データベースコンソールでのデータ確認

=== Step 7: PRテンプレートの動作確認

**GitHub上でPull Requestテンプレートが正しく機能するか確認:**

1. **変更をコミット・プッシュ**
```bash
git add .
git commit -m "test: PRテンプレート動作確認"
git push origin member-management-trial
```

2. **Pull Request作成**
- GitHubで **Compare & pull request** をクリック
- PRテンプレートが自動的に表示されることを確認
- 以下のセクションが含まれている必要があります：
  - 概要
  - 関連Issue  
  - 実装内容
  - テスト
  - チェックリスト

3. **PRテンプレートが表示されない場合**
```bash
# .githubディレクトリの確認
ls -la .github/
# pull_request_template.md が存在しない場合は手動でコピー
cp ../sample-files/.github/pull_request_template.md .github/
git add .github/pull_request_template.md
git commit -m "add: PRテンプレートを追加"
git push origin member-management-trial
```

[TIP]
====
*AI駆動開発体験のコツ*

- **Copilotチャット**: Issue作成から実装指示まで自然な会話で依頼
- **段階的開発**: 一度に全て作らず、レイヤーごとに分けて開発
- **仕様書参照**: `@workspace` でプロジェクト全体の文脈を活用
- **継続学習**: 各ステップでCopilotがプロジェクトを学習していく過程を体験
====

[WARNING]
====
*注意事項*

- sample-filesは**学習用**です。本格的なプロジェクトには**template-files**を使用してください
- 初回は基本構造の手動作成が必要ですが、2回目以降はAIが学習して自動化されます
- エラーが発生した場合は、AIにフィードバックして修正を依頼してください
====

== 利用設定

=== GitHub Copilotのサブスクリプション登録

GitHub Copilot コーディングエージェントを使用するには、*Copilot コーディングエージェント*が利用可能なプランに登録する必要があります。
本ガイドでは *Copilot Pro* を利用します。

==== 登録手順

[cols="1,9"]
|===
|手順 |操作内容

|1
|*GitHubにログイン* +
https://github.com にアクセスし、右上の *Sign in* をクリックしてログインします。

|2
|*Copilotの申込ページを開く* +
画面右上のプロフィールアイコン → *Settings* → 左側メニューの *Copilot* → *Get Copilot* または *Start free trial* をクリック

|3
|*プランの選択* +
提示されるプランから *Copilot Pro* を選択します。

|4
|*支払い情報を入力* +
クレジットカードまたはGitHubが対応する決済方法と請求先住所を入力します。 +
日本の住所入力例は、欄外のTable「日本の住所入力例」を参照してください。

|5
|*登録完了の確認* +
*Confirm* をクリックして申し込みを確定します。完了画面に "GitHub Copilot has been activated" と表示され、確認メールが届きます。
|===

.日本の住所入力例
[cols="2,4,3", options="header"]
|===
|項目 |入力内容 |例

|FirstName / LastName
|クレジットカードに記載されているローマ字氏名
|TARO YAMADA

|Address Line 1
|番地・丁目・マンション名などを英語表記で入力
|1-1-1 Chiyoda, Apt. 101

|City
|市区町村を英語で入力
|Chiyoda-ku、Suita-shi

|Country/Region
|Japan を選択
|Japan

|Postal Code
|郵便番号をハイフン付きで入力
|100-0001

|State/Province
|都道府県を英語で入力
|Tokyo、Osaka
|===

[NOTE]
====
日本語住所は https://judress.tsukuenoue.com/ にて英語に変換できます。
====

=== GitHub Copilot コーディングエージェントを有効にする

[cols="1,9"]
|===
|手順 |操作内容

|1
|*コーディングエージェントの設定を開く* +
画面右上のプロフィールアイコン → *Settings* → 左側メニューの *Copilot* → *Coding agent* をクリック

|2
|*対象リポジトリを選択* +
Repository access を *Only select repositories* に設定し、*Select repositories* ボタンから利用するリポジトリを選択します。

|===

[TIP]
====
セキュリティの観点から、*Only select repositories* を選択して必要なリポジトリのみに限定することを推奨します。
====

== AI駆動開発準備

AI駆動開発を効果的に行うためには、AIが理解しやすい形でプロジェクトの情報を整備する必要があります。
以下のドキュメントを準備することで、AIのパフォーマンスが大幅に向上します。

=== 準備すべきドキュメント一覧

[cols="1,2,4,3", options="header"]
|===
|順序 |ドキュメント |目的 |重要度

|1 |README.md |プロジェクト概要とセットアップ手順 |⭐⭐⭐
|2 |INSTRUCTIONS.md |AIへの指示とルール（エントリーポイント） |⭐⭐⭐
|3 |docs/SPEC.md |機能仕様の一覧（仕様書ハブ） |⭐⭐⭐
|4 |docs/specs/api/ |RESTful API仕様書（実装詳細） |⭐⭐⭐
|5 |docs/specs/ui/ |画面・UI仕様書（実装詳細） |⭐⭐⭐
|6 |docs/specs/db/ |データベース設計書（実装詳細） |⭐⭐⭐
|7 |PROJECT_STRUCTURE.md |プロジェクト構造リファレンス |⭐⭐
|8 |.github/ |Issue・PR作成フォーマット |⭐⭐
|9 |.editorconfig |エディタ設定とフォーマット統一 |⭐⭐
|10 |docs/development-flow.md |開発プロセス |⭐⭐
|11 |docs/conventions.md |コーディング規約 |⭐⭐
|12 |docs/architecture.md |アーキテクチャ方針 |⭐⭐
|13 |docs/policies.md |開発ポリシー |⭐⭐
|14 |docs/ai/agent.md |AI作業契約（詳細ルール） |⭐
|15 |docs/prompts-examples.md |AI依頼例（上級者向け） |⭐
|===

=== ファイル配置先

各ドキュメントの配置場所は以下の通りです：

- **プロジェクトルート**: README.md, INSTRUCTIONS.md, PROJECT_STRUCTURE.md, SETUP.md, .editorconfig
- **docs/**: 開発プロセス関連ドキュメント、仕様書、AI関連ドキュメント
- **docs/specs/**: 仕様書実体（プロジェクト固有に書き換え前提）
- **docs/ai/**: AI関連ドキュメント統合
- **.github/**: GitHubテンプレート

詳細なディレクトリ構造と各ファイルの役割については、link:template-files/PROJECT_STRUCTURE.md[PROJECT_STRUCTURE.md] を参照してください。

[NOTE]
====
*テンプレートとサンプルの違い*

* **template-files/**: 汎用的なひな形（プロジェクト固有情報は [括弧] で表記）
* **sample-project/**: 具体的な実装例（メンバー管理システムの完全な仕様）
====

=== 各ドキュメントの作成ガイド

==== README.md の作成

プロジェクトの「顔」となる最重要ドキュメントです。

[cols="2,8"]
|===
|目的 |プロジェクトの概要、セットアップ手順、基本的な使用方法の説明
|配置場所 |プロジェクトルート (`/README.md`)
|参考テンプレート |link:templates/README.md[README.mdサンプル]
|===

*含めるべき内容:*

* プロジェクトの目的と概要
* 主な機能
* 技術スタック
* セットアップ手順
* 基本的な使用方法
* 関連ドキュメントへのリンク

==== INSTRUCTIONS.mdの作成

AIエージェントへの指示とプロジェクトルールをまとめた最重要ドキュメントです。

[cols="2,8"]
|===
|目的 |AIエージェントへの具体的な指示とルールの提供
|配置場所 |プロジェクトルート (`/INSTRUCTIONS.md`)
|参考テンプレート |link:templates/INSTRUCTIONS.md[INSTRUCTIONS.mdサンプル]
|===

*含めるべき内容:*

* AIエージェントの役割と責任範囲
* コーディングスタイルと命名規則
* コミットメッセージのフォーマット
* PRの作成とレビュー手順
* 使用する技術スタックとフレームワーク
* テストとデプロイの手順

==== SPEC.mdの作成

実装すべき機能を明確化するためのドキュメントです。

[cols="2,8"]
|===
|目的 |機能仕様の概要と詳細仕様書へのリンク（仕様書ハブ）
|配置場所 |`/docs/SPEC.md`
|参考テンプレート |link:templates/docs/SPEC.md[SPEC.mdサンプル]
|===

*含めるべき内容:*

* 機能一覧と概要
* 各機能の詳細仕様書へのリンク（specs/ 配下）
* 優先度と実装順序
* 画面遷移図やAPI仕様の概要

==== docs/specs/ 仕様書の作成

実装の詳細を定義する最重要な仕様書群です。

===== API仕様書 (docs/specs/api/)

[cols="2,8"]
|===
|目的 |RESTful API の詳細仕様定義
|配置場所 |`/docs/specs/api/[リソース名]/[操作名].md`
|参考テンプレート |link:templates/docs/specs/api/members/[APIテンプレート]
|===

*含めるべき内容:*

* エンドポイント定義 (URL、HTTPメソッド)
* リクエスト・レスポンス形式 (JSON例)
* パラメータ詳細 (必須/任意、バリデーション)
* エラーレスポンス (ステータスコード、メッセージ)
* 認証・認可要件

*ファイル例:*
* `docs/specs/api/members/list.md` - メンバー一覧取得API
* `docs/specs/api/members/create.md` - メンバー登録API

===== UI仕様書 (docs/specs/ui/)

[cols="2,8"]
|===
|目的 |画面・ユーザーインターフェースの詳細仕様定義
|配置場所 |`/docs/specs/ui/[画面名].md`
|参考テンプレート |link:templates/docs/specs/ui/[UIテンプレート]
|===

*含めるべき内容:*

* 画面レイアウト・構成要素
* 入力フィールドとバリデーション
* ボタン・リンクの動作仕様
* 画面遷移・状態変化
* レスポンシブ対応要件

*ファイル例:*
* `docs/specs/ui/member-list.md` - メンバー一覧画面
* `docs/specs/ui/member-registration.md` - メンバー登録画面

===== データベース設計書 (docs/specs/db/)

[cols="2,8"]
|===
|目的 |データベース構造とテーブル設計の詳細定義
|配置場所 |`/docs/specs/db/[設計書名].md`
|参考テンプレート |link:templates/docs/specs/db/database-design.md[DBテンプレート]
|===

*含めるべき内容:*

* テーブル定義 (カラム、データ型、制約)
* 主キー・外部キー関係
* インデックス設計
* データ整合性ルール
* マイグレーション方針

*ファイル例:*
* `docs/specs/db/database-design.md` - 全体的なDB設計

[IMPORTANT]
====
*specs/ ディレクトリの重要性*

これらの仕様書は **AIエージェントが実装時に直接参照する最重要ドキュメント** です：

* **具体性が必要**: 曖昧な表現は避け、実装可能なレベルまで詳細化
* **整合性の確保**: API・UI・DBの仕様が矛盾しないよう注意
* **更新の徹底**: 仕様変更時は関連するすべてのファイルを同期更新

**テンプレートからの書き換え前提**
templates/ の specs/ 配下はサンプル（メンバー管理機能）のため、
プロジェクト固有の機能仕様に必ず書き換えてください。
====

==== PROJECT_STRUCTURE.mdの作成

プロジェクトの具体的なディレクトリ構造とファイル配置ルールを示すリファレンスドキュメントです。

[cols="2,8"]
|===
|目的 |実装時の構造リファレンスとAIエージェント向け配置指示
|配置場所 |プロジェクトルート (`/PROJECT_STRUCTURE.md`)
|参考テンプレート |link:templates/PROJECT_STRUCTURE.md[PROJECT_STRUCTURE.mdサンプル]
|===

*含めるべき内容:*

* フェーズ別のディレクトリ構造（ドキュメント→実装→完成）
* AIエージェント向けファイル配置ルール
* 実装時のパッケージ構成例
* クイックリファレンス（よく使うパス一覧）

==== .editorconfigの作成

エディタ設定とコードフォーマットの統一を行う設定ファイルです。

[cols="2,8"]
|===
|目的 |エディタ横断でのコード品質統一とGoogle Java Formatとの併用
|配置場所 |プロジェクトルート (`/.editorconfig`)
|参考テンプレート |link:templates/.editorconfig[.editorconfigサンプル]
|===

*含めるべき内容:*

* 基本設定 (文字エンコーディング、改行コード、最終行)
* インデント設定 (全言語2スペース統一: Java, JavaScript, HTML, CSS, XML等)
* 行末スペースの自動削除
* ファイル形式別の個別設定



[NOTE]
====
*Google Java Format との統合について*

**.editorconfig の役割:**
* エディタレベルでの基本設定（文字コード、改行、インデント等）
* 全ファイル形式の共通ルール定義（2スペース統一）

**Google Java Format との統合：**
* **Google Java Format**: Javaコード専用の詳細フォーマット（括弧位置、スペース配置等）
* **.editorconfig**: 全言語共通の基本設定（インデント、文字コード、改行等）

**統合効果：**
* Java: Google Java Format + .editorconfig の基本設定
* その他すべてのファイル: .editorconfig のみで統一（2スペースインデント）

**推奨開発環境設定：**
* VS Code: Google Java Format拡張機能 + .editorconfig対応
* IntelliJ IDEA: Google Java Format Plugin + .editorconfig対応
* 保存時自動フォーマット設定を有効化

この組み合わせにより、Javaの詳細フォーマットを維持しながら、
プロジェクト全体で一貫した2スペースインデントを実現できます。
====

==== development-flow.mdの作成

Issue作成からマージまでの開発プロセスを定義します。

[cols="2,8"]
|===
|目的 |開発プロセスの標準化と効率化
|配置場所 |`/docs/development-flow.md`
|参考テンプレート |link:templates/docs/development-flow.md[development-flow.mdサンプル]
|===

*含めるべき内容:*
* Issueの作成と管理方法
* Copilotのアサイン方法
* コード実装とPR作成の手順
* PRレビューとマージのフロー

==== conventions.mdの作成

命名規則やコーディングスタイルの統一ルールをまとめます。

[cols="2,8"]
|===
|目的 |コードの一貫性と可読性の向上
|配置場所 |`/docs/conventions.md`
|参考テンプレート |link:templates/docs/conventions.md[conventions.mdサンプル]
|===

*含めるべき内容:*

* 命名規則 (変数名、関数名、クラス名など)
* コーディングスタイル (インデント、改行、コメントなど)
* フォルダ構成とファイル命名ルール
* コードフォーマット設定 (Google Java Format + .editorconfig)

==== architecture.mdの作成

システム設計方針とアーキテクチャパターンをまとめます。

[cols="2,8"]
|===
|目的 |システム設計の一貫性と拡張性の確保
|配置場所 |`/docs/architecture.md`
|参考テンプレート |link:templates/docs/architecture.md[architecture.mdサンプル]
|===

*含めるべき内容:*

* システム全体のアーキテクチャ概要
* 各コンポーネントの役割と関係性
* 使用するアーキテクチャパターン (例: MVC, マイクロサービスなど)

==== policies.mdの作成

開発ポリシー (セキュリティ、品質管理など) をまとめます。

[cols="2,8"]
|===
|目的 |開発プロセスの標準化とリスク管理
|配置場所 |`/docs/policies.md`
|参考テンプレート |link:templates/docs/policies.md[policies.mdサンプル]
|===

*含めるべき内容:*

* セキュリティポリシー
* 品質管理ポリシー
* コードレビューのルール
* デプロイメントポリシー

==== prompts-examples.mdの作成

AIエージェントへの効果的な依頼例をまとめます。

[cols="2,8"]
|===
|目的 |AIエージェントへの具体的な依頼方法を示す
|配置場所 |`/docs/prompts-examples.md`
|参考テンプレート |link:templates/docs/prompts-examples.md[prompts-examples.mdサンプル]
|===

*含めるべき内容:*

* 具体的な依頼文の例
* 依頼時の注意点
* 効果的なコミュニケーション方法

==== agent.mdの作成

AIエージェントとの作業契約・責任範囲を明確にします。

[cols="2,8"]
|===
|目的 |AIエージェントとの作業契約と責任範囲の明確化
|配置場所 |`/instructions/agent.md`
|参考テンプレート |link:templates/instructions/agent.md[agent.mdサンプル]
|===

*含めるべき内容:*

* AIエージェントの役割と責任範囲
* 作業契約の条件
* 問題発生時の対応方法

==== GitHubテンプレートの作成

GitHubのIssueとPull Request作成時に使用するテンプレートを用意します。

[cols="2,8"]
|===
|目的 |Issue・PR作成の標準フォーマットを提供し、情報の一貫性を確保
|配置場所 |`.github/ISSUE_TEMPLATE/` と `.github/pull_request_template.md`
|参考テンプレート |link:templates/.github/[GitHubテンプレートサンプル]
|===

*含めるべき内容:*

**Issueテンプレート:**
* バグ報告テンプレート
  ** 再現手順
  ** 期待される動作
  ** 実際の動作
  ** 環境情報 (OS、ブラウザ、バージョンなど)
* 機能要望テンプレート
  ** 要望の概要
  ** 利用シナリオ
  ** 期待される効果
  ** 優先度

**PRテンプレート:**
* 変更内容の概要
* 関連Issue番号
* テスト実施状況
* レビュー観点
* チェックリスト

==== ドキュメント作成の注意点

* 各ドキュメントは明確で具体的な内容を心がける
* AIエージェントが理解しやすいように、専門用語や略語は避ける
* ドキュメントの整合性を保つため、変更があった場合は関連するすべてのドキュメントを更新する

[WARNING]
====
ドキュメントが不十分だと、AIが誤った判断をしてしまう可能性があります。
特に INSTRUCTIONS.md と SPEC.md は必ず整備してください。
====

==== 作成順序の推奨

[cols="1,3,6"]
|===
|順序 |ドキュメント |作成のポイント

|1 |README.md |プロジェクトの「顔」となるため最初に作成
|2 |INSTRUCTIONS.md |AIの動作を決める最重要ドキュメント
|3 |SPEC.md |実装すべき機能を明確化
|4 |開発フロー |Issue→PR→マージの流れを定義
|5 |その他ドキュメント |プロジェクトの特性に応じて
|===

==== テンプレートの活用

すべてのドキュメントのテンプレートは `templates/` ディレクトリに用意されています：

* link:templates/README.md[README.mdテンプレート]
* link:templates/INSTRUCTIONS.md[INSTRUCTIONS.mdテンプレート] 
* link:templates/SPEC.md[SPEC.mdテンプレート]
* link:templates/docs/[docs/配下のテンプレート群]
* link:templates/.github/ISSUE_TEMPLATE/[Issueテンプレート]

== 環境構築とテンプレート構成

=== 開発フロー

```mermaid
flowchart TD
    A[開発者: Issue作成依頼] --> B[Copilot: Issue作成]
    B --> C[開発者: Issue確認・Copilotアサイン]
    C --> D[Copilot: コード実装]
    D --> E[Copilot: Pull Request作成]
    E --> F[開発者: PRレビュー]
    F --> G{修正必要?}
    G -->|Yes| H[開発者: フィードバック]
    H --> I[Copilot: 修正対応]
    I --> F
    G -->|No| J[開発者: PRマージ]
    J --> K[完了]
```
|*リポジトリ設定* +
- Repository name: プロジェクト名を入力
- Description: プロジェクトの概要を記載
- Public/Private: 必要に応じて選択
- ✅ *Add a README file* にチェック

|3
|*リポジトリ作成完了* +
*Create repository* をクリックしてリポジトリを作成
|===

==== Copilot コーディングエージェント有効化

[cols="1,9"]
|===
|手順 |操作内容

|1
|*Settings画面を開く* +
GitHub右上のプロフィールアイコン → *Settings*

|2
|*Copilot設定画面* +
左側メニューの *Copilot* → *Coding agent*

|3
|*リポジトリ追加* +
*Repository access* → *Only select repositories* → *Select repositories* で作成したリポジトリを追加
|===

=== テンプレート導入

==== Issue作成とCopilotアサイン

[cols="1,9"]
|===
|手順 |操作内容

|1
|*Issueページを開く* +
作成したリポジトリページで *Issues* タブをクリック

|2
|*新しいIssue作成* +
*New issue* ボタンをクリック

|3
|*Copilotをアサイン* +
右側の *Assignees* から *@copilot* を選択してアサイン
|===

==== テンプレート導入Issue

以下の内容でIssueを作成してください：

**タイトル:**
```
AI駆動開発テンプレートファイルの導入
```

**本文:**
[source,markdown]
----
tanakari/copilot-coding-agent-guide-templates リポジトリの templates ディレクトリから以下のファイルを取得して、このリポジトリのルートに配置してください：

## 取得するファイル・ディレクトリ

### 必須ファイル
- README.md
- INSTRUCTIONS.md  
- SETUP.md
- PROJECT_STRUCTURE.md
- .editorconfig

### ディレクトリ（全ファイルを含む）
- docs/ （仕様書、AI関連ドキュメント含む）
- .github/ （Issue・PRテンプレート）

## 実装要件

- 各ファイルを適切な場所に配置
- 空のディレクトリには .gitkeep ファイルを作成
- 既存の README.md は上書きせず、README_template.md として保存
- specs/ ディレクトリのファイルはプロジェクト固有の仕様書として後で書き換える前提で配置

## 完了条件

- [ ] すべてのテンプレートファイルがルートに正しく配置されている
- [ ] ディレクトリ構造が templates/ と同じになっている  
- [ ] 空のディレクトリに .gitkeep が作成されている
- [ ] ファイルのコピーが完了している

## 参考リンク

- テンプレート元: https://github.com/tanakari/copilot-coding-agent-guide-templates/tree/main/templates
----

=== プロジェクト情報更新

テンプレート導入完了後、新しいIssueでプロジェクト固有情報を更新します：

**タイトル:**
```
プロジェクト固有情報への更新
```

**本文:**
[source,markdown]
----
導入されたテンプレートファイルをプロジェクト固有の情報に更新してください：

## プロジェクト情報

以下の情報に置き換えてください：
- **プロジェクト名**: [実際のプロジェクト名]
- **プロジェクト概要**: [プロジェクトの目的と概要]
- **技術スタック**: [使用技術（例：Spring Boot 3.5.x + Java 25 + Thymeleaf + PostgreSQL）]
- **開発チーム**: [チーム構成や連絡先情報]

## 更新対象ファイル

### README.md
- プロジェクト名とタイトル
- プロジェクト概要の説明
- 技術スタックの記載
- セットアップ手順のプロジェクト名

### INSTRUCTIONS.md
- 技術固有の指示
- プロジェクト固有のルール
- 使用フレームワークの設定

### docs/SPEC.md
- 実装予定の機能一覧
- プロジェクト固有の要件

### docs/specs/ ディレクトリ
- **docs/specs/api/**: API仕様書をプロジェクト固有の内容に書き換え
- **docs/specs/ui/**: UI仕様書をプロジェクト固有の内容に書き換え
- **docs/specs/db/**: データベース設計書をプロジェクト固有の内容に書き換え
- テンプレートの「メンバー一覧」例を実際の機能仕様に置き換える

### docs/ai/ ディレクトリ
- AI関連ドキュメントの中心として整備
- プロジェクト固有のAI指示を充実

## 完了条件

- [ ] すべてのテンプレート文言がプロジェクト固有の情報に置き換わっている
- [ ] リンクとパスが正しく動作する
- [ ] プロジェクトの目的と範囲が明確に記載されている
- [ ] 技術スタックが実際の使用技術と一致している
- [ ] specs/ ディレクトリがプロジェクト固有の仕様書に更新されている
----

=== 初期開発開始

環境構築完了後、DDD（ドメイン駆動設計）の原則に従って段階的にプロジェクト開発を開始します。小さなIssueに分割して進めることで、確実に動作確認しながら開発できます：

==== Issue 1: プロジェクト基盤設定の作成

**タイトル:**
```
プロジェクト基盤設定ファイルの作成（インフラ層）
```

**本文:**
[source,markdown]
----
INSTRUCTIONS.md に記載された技術スタックに基づいて、プロジェクトの基盤設定ファイルを作成してください。

## 作成内容（インフラストラクチャ層のみ）

- Maven または Gradle によるビルド設定ファイル
- アプリケーションのメイン設定ファイル（application.yml）
- データベース接続設定
- 基本的なディレクトリ構造（DDD準拠）

## ディレクトリ構造
```
src/main/java/com/example/project/
├── Application.java        # メインクラス
├── infrastructure/         # インフラストラクチャ層
│   └── config/             # 設定クラス
├── domain/                 # ドメイン層（空）
├── application/            # アプリケーション層（空）
└── presentation/           # プレゼンテーション層（空）
```

## 参考ファイル

- INSTRUCTIONS.md: 技術スタックと開発ルール
- docs/architecture.md: DDD設計方針

## 完了条件

- [ ] プロジェクトがビルドできる
- [ ] 設定ファイルが適切に配置されている
- [ ] DDD準拠のパッケージ構成になっている
- [ ] データベース接続設定が完了している
----

==== Issue 2: ドメイン層の基本実装

**タイトル:**
```
ドメイン層の基本実装（エンティティ・バリューオブジェクト）
```

**本文:**
[source,markdown]
----
specs/db/database-design.md の設計に基づいて、ドメイン層の基本要素を実装してください。

## 作成内容（ドメイン層のみ）

- ドメインエンティティの定義
- バリューオブジェクトの定義
- ドメインルール・バリデーションロジック
- リポジトリインターフェース（ドメイン層）

## 実装ガイドライン

- **Pure Java**: JPA等のインフラ技術に依存しない
- **不変性**: バリューオブジェクトは不変で実装
- **ビジネスルール**: エンティティ内にビジネスロジックを配置
- **リポジトリ**: インターフェースのみ定義（実装は別Issue）

## 参考ファイル

- specs/db/database-design.md: データベース設計書
- docs/architecture.md: DDD設計方針

## 完了条件

- [ ] エンティティが適切に定義されている
- [ ] バリューオブジェクトが不変で実装されている
- [ ] ビジネスルールがドメイン層に配置されている
- [ ] リポジトリインターフェースが定義されている
- [ ] インフラ技術への依存がない（Pure Java）
----

==== Issue 3: インフラストラクチャ層の実装

**タイトル:**
```
インフラストラクチャ層の実装（リポジトリ・データベース）
```

**本文:**
[source,markdown]
----
ドメイン層で定義されたリポジトリインターフェースの実装と、データベーステーブルを作成してください。

## 作成内容（インフラストラクチャ層のみ）

- JPA Entityクラス（ドメインエンティティとは別）
- リポジトリ実装クラス（Spring Data JPA）
- データベーステーブル作成DDL
- ドメインエンティティ ↔ JPA Entity 変換ロジック

## 実装ガイドライン

- **変換責務**: JPAエンティティ ↔ ドメインエンティティの変換
- **依存方向**: インフラ層 → ドメイン層（逆方向の依存禁止）
- **テーブル設計**: specs/db/ の設計に厳密に従う
- **トランザクション**: リポジトリ実装でトランザクション管理

## 参考ファイル

- Domain層のリポジトリインターフェース
- specs/db/database-design.md: データベース設計書

## 完了条件

- [ ] リポジトリが正しく実装されている
- [ ] データベーステーブルが作成される
- [ ] ドメインエンティティとJPAエンティティが分離されている
- [ ] 変換ロジックが適切に実装されている
- [ ] 基本的なCRUD操作が動作する
----

==== Issue 4: アプリケーション層の実装

**タイトル:**
```
アプリケーション層の実装（ユースケース・サービス）
```

**本文:**
[source,markdown]
----
specs/api/ の仕様に基づいて、アプリケーション層のサービスクラスを実装してください。

## 作成内容（アプリケーション層のみ）

- アプリケーションサービスクラス
- ユースケース実装
- DTOクラス（入力・出力）
- トランザクション境界の定義

## 実装ガイドライン

- **薄い層**: ビジネスロジックはドメイン層に委譲
- **トランザクション**: アプリケーション層でトランザクション管理
- **DTO変換**: ドメインオブジェクト ↔ DTO の変換
- **例外ハンドリング**: ドメイン例外をアプリケーション例外に変換

## 参考ファイル

- specs/api/: API仕様書
- ドメイン層のエンティティ・リポジトリ
- インフラ層のリポジトリ実装

## 完了条件

- [ ] アプリケーションサービスが実装されている
- [ ] ユースケースが正しく動作する
- [ ] DTOが適切に定義されている
- [ ] トランザクション境界が明確である
- [ ] 単体テストが実装されている
----

==== Issue 5: プレゼンテーション層の実装

**タイトル:**
```
プレゼンテーション層の実装（REST API・コントローラー）
```

**本文:**
[source,markdown]
----
specs/api/ の仕様に基づいて、RESTful APIのエンドポイントを実装してください。

## 作成内容（プレゼンテーション層のみ）

- RESTコントローラークラス
- リクエスト・レスポンスDTO
- バリデーション設定
- 例外ハンドリング（Global Exception Handler）

## 実装ガイドライン

- **薄い層**: ビジネスロジックはアプリケーション層に委譲
- **HTTPマッピング**: specs/api/ の仕様に厳密に従う
- **バリデーション**: Bean Validationを使用
- **例外処理**: 統一的なエラーレスポンス

## 参考ファイル

- specs/api/: API仕様書
- アプリケーション層のサービス
- docs/conventions.md: REST API規約

## 完了条件

- [ ] RESTエンドポイントが実装されている
- [ ] API仕様に準拠したレスポンス形式
- [ ] バリデーションが適切に動作する
- [ ] エラーハンドリングが統一されている
- [ ] 統合テストが実装されている
----

==== Issue 6: 統合テスト・E2Eテストの実装

**タイトル:**
```
統合テスト・E2Eテストの実装
```

**本文:**
[source,markdown]
----
全レイヤーが連携した統合テストとエンドツーエンドテストを実装してください。

## 作成内容

- レイヤー間統合テスト
- APIエンドポイントのE2Eテスト
- データベーステスト
- テストデータセットアップ

## 実装ガイドライン

- **TestContainers**: データベーステスト用
- **MockMvc**: API統合テスト用
- **テストデータ**: 本番に近いデータで検証
- **全機能カバー**: specs/ の全仕様をテスト

## 完了条件

- [ ] 全APIエンドポイントがテスト済み
- [ ] データベース操作が正常動作
- [ ] エラー系も含めてテスト済み
- [ ] テストカバレッジが80%以上
----

[TIP]
====
*DDD準拠の段階的開発のメリット*

* **レイヤー分離**: 各層の責務が明確で保守性が向上
* **依存方向制御**: ドメイン層の独立性を保持
* **段階的検証**: 各層ごとに動作確認が可能
* **Copilotの理解促進**: 明確な責務分割でAIの実装精度向上

*DDD開発順序の重要性*

1. **ドメイン層優先**: ビジネスロジックを最初に確立
2. **インフラ層分離**: 技術的関心事を分離して実装
3. **アプリケーション層**: ユースケースを明確に実装
4. **プレゼンテーション層**: 外部インターフェースとして実装
5. **統合テスト**: 全体の協調動作を確認

*AI開発での注意点*

* 各Issueで単一レイヤーのみ実装することをAIに明示
* レイヤー間の依存方向をIssue説明で明確化
* Pure Javaでの実装をドメイン層で強調
====

=== Copilot作業状況の確認

GitHub上でのCopilotの作業状況は以下の方法で確認できます：

[cols="2,8"]
|===
|確認方法 |詳細

|**Pull Request確認**
|Copilotが作業を完了すると自動的にPRが作成されます。 +
PRタイトルに `[WIP]` が付いている間は作業中です。

|**View session**
|IssueやPRから *View session* リンクで作業進捗をリアルタイム確認できます。

|**Issue コメント**
|Copilotから質問や確認事項がある場合、Issueにコメントされます。
|===

[TIP]
====
*効果的なプロジェクト開始のコツ*

* Issue作成時は明確で具体的な要件を記載する
* Copilotの作業完了を待ってから次のIssueを作成する
* PRレビューでは建設的なフィードバックを提供する
* `specs/` ディレクトリは書き換え前提でテンプレートから実際の仕様に更新する
* 小さな単位でのタスク分割を心がける
====

== AI駆動開発の実践

ドキュメントの準備が完了したら、実際にAI駆動開発を開始できます。

=== 開発フロー

```mermaid
flowchart TD
    A[開発者: Issue作成依頼] --> B[Copilot: Issue作成]
    B --> C[開発者: Issue確認・Copilotアサイン]
    C --> D[Copilot: コード実装]
    D --> E[Copilot: Pull Request作成]
    E --> F[開発者: PRレビュー]
    F --> G{修正必要?}
    G -->|Yes| H[開発者: フィードバック]
    H --> I[Copilot: 修正対応]
    I --> F
    G -->|No| J[開発者: PRマージ]
    J --> K[完了]
```

=== 実際の作業ステップ

==== Step 1: Issue作成依頼

* GitHubのIssueでCopilotに作業を依頼
* 具体的な要件と完了条件を明記
* 関連する仕様書やドキュメントを参照

==== Step 2: Copilotによる作業

* Copilotが自動的にコードを実装
* PRのタイトルが `[WIP]` の間は作業中
* `[WIP]` が外れたら作業完了

==== Step 3: レビューとフィードバック

* Pull Requestをレビュー
* 必要に応じてコメントで修正依頼
* `View session` で作業状況をリアルタイム確認可能

==== Step 4: マージと完了

* 品質確認後にPRをマージ
* Issueが自動的にクローズ

[TIP]
====
*効果的なAI開発のコツ*

* 明確で具体的な指示を心がける
* 既存のドキュメントを積極的に参照させる
* 小さな単位でのIssue作成を推奨
* レビューでは建設的なフィードバックを提供
====

== リポジトリ構造

```
copilot-coding-agent-guide-templates/
├── README.adoc                    # メインガイド（このファイル）
├── LICENSE                        # ライセンス
├── template-files/                # 🎯 新プロジェクト用テンプレート
│   ├── README.md                 # プロジェクト概要テンプレート
│   ├── INSTRUCTIONS.md           # AI開発指示書テンプレート
│   ├── SETUP.md                  # セットアップガイドテンプレート
│   ├── PROJECT_STRUCTURE.md      # プロジェクト構造定義
│   ├── .editorconfig            # エディタ設定
│   ├── .github/                 # GitHubテンプレート
│   │   └── pull_request_template.md
│   └── docs/                    # ドキュメントテンプレート
│       ├── specs/               # 仕様書テンプレート
│       ├── ai/                  # AI関連ドキュメント
│       └── *.md                # 開発プロセスドキュメント
└── sample-files/                # 📚 学習用サンプルプロジェクト
    ├── README.md               # メンバー管理システム概要
    ├── README_SAMPLE.md        # サンプル学習ガイド
    ├── [template-files と同じ構造]
    └── specs/                  # 具体的な仕様書例
        ├── api/members/        # メンバーAPI仕様
        └── ui/                # UI仕様
```

== 次のステップ

このガイドを完了した後は：

=== 📋 template-files利用の場合
1. `template-files/` を新プロジェクトにコピー
2. プロジェクト固有情報を設定（[括弧]の部分を編集）
3. AI開発開始

=== 🎯 sample-files学習の場合  
1. `sample-files/README_SAMPLE.md` の実習手順に従って学習
2. メンバー管理システムの実装を体験
3. 学習後にtemplate-filesを実プロジェクトに適用

== サポート・フィードバック

* **Issues**: バグ報告や機能要望は https://github.com/tanakari/copilot-coding-agent-guide-templates/issues
* **Discussions**: 使用方法の質問や改善提案は GitHub Discussions
* **Pull Requests**: テンプレートの改善提案歓迎

---

**🚀 Happy AI-Driven Development!**
* レビューでは建設的なフィードバックを提供
