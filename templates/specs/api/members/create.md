# メンバー登録API

## 概要

メンバー登録APIは、新しいメンバーをシステムに追加するためのAPIです。このAPIにより、ユーザーは必要な情報を入力してメンバーとして登録できます。

## 仕様概要

- パラメータチェック: 入力された情報が正しい形式であることを確認します。
- DB登録： 入力された情報をデータベースに保存します。
- 処理結果の返却: 登録が成功した場合は成功メッセージを、失敗した場合はエラーメッセージを返します。

## フロー

1. クライアントからメンバー登録リクエストを受け取ります
2. 必要な情報のバリデーションを行います
3. バリデーションが成功した場合、データベースに保存します
4. 登録成功のレスポンスを返します
5. バリデーションが失敗した場合、エラーメッセージを返します
6. サーバーエラーが発生した場合、適切なエラーメッセージを返します
7. 登録完了後、メンバーをログイン状態にします

## I/O

### 入力パラメータ

- 名前：name (必須)
- メールアドレス：email (必須、ユニーク)
- 住所：address（必須、市区町村まで）
- プロフィール写真：profile_picture (任意、画像ファイルのURL)
- 自己紹介：bio (任意、テキスト)
- パスワード：password (必須、セキュリティ要件を満たすこと)
- 確認用パスワード：confirm_password (必須、パスワードと一致すること)
- 利用規約とプライバシーポリシーへの同意：agree_terms (必須、利用規約とプライバシーポリシーへの同意)
- CSRFトークン：CSRFトークン (必須、セキュリティ対策)
- Captchaレスポンス：Captchaレスポンス (任意、スパム防止)
- リファラ情報：リファラ情報 (任意、マーケティング分析用)
- ユーザーエージェント情報：ユーザーエージェント情報 (任意、デバイス識別用)
- IPアドレス：IPアドレス (自動取得、セキュリティ対策用)

### 出力パラメータ

- 成功時:
  - ステータスコード: 201 Created
  - メッセージ: "登録が完了しました"
  - メンバーID: 登録されたメンバーの一意の識別子
  - 自動ログイン用トークン: 登録後に自動ログインするためのトークン

- 失敗時:
  - ステータスコード: 400 Bad Request (バリデーションエラー), 500 Internal Server Error (サーバーエラー)
  - エラーメッセージ: エラーの詳細情報
  - エラーコード: 内部エラーの識別子
  - リクエストID: エラーが発生したリクエストの識別子

## バリデーション
  - 入力項目の必須チェック
  - メールアドレスの形式チェック
  - パスワードの強度チェック (最低8文字、英大文字、英小文字、数字、特殊文字を含むこと)
  - 確認用パスワードがパスワードと一致すること
  - プロフィール写真のファイル形式チェック (JPEG, PNG)
  - 利用規約とプライバシーポリシーへの同意チェック
  - CSRFトークンの有効性チェック
  - Captchaレスポンスの検証（導入する場合）
  - メールアドレスの重複チェック
