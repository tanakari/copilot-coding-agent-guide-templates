# AIエージェント作業契約（Working Agreement for AI Agent）

本プロジェクトは **AI 駆動開発** を想定します。変更は **小さく・差分で・理由とロールバック併記** を原則とします。

## 契約（ポリシー）

- **1 Issue = 1 PR**。`main` 直 push は禁止
- `.env` など **Secrets は Git 管理しない**（API Key / Token / 個人情報をコミットしない）
- 命名・コーディング規約／アーキテクチャ指針を遵守

## 出力形式（厳守）

1. **要約（3行以内）** — 何を、なぜ、どう変えるか
2. **手順（番号付き）** — 編集ファイル／コマンド／ブランチ名案（例：`feature/<issue-id>-<summary>`）
3. **差分（unified diff）** — ファイル別、**最大 200 行/PR**
4. **ロールバック** — 元に戻す具体手順（コマンドや差分）
5. **根拠・注意点** — 採用理由／代替案／失敗しやすい点（3つ）
6. **参照** — `SPEC.md` の該当節、関連 Issue / PR へのリンク

## 制約（Constraints）

- **Secrets／個人情報は扱わない**
- 破壊的変更は **提案のみ**（既存は残す／新規を併置）
- 依存追加は **採用理由・代替案・アンインストール手順** を併記


## 責務分離ルール（Separation of Concerns）

- **画面（フロントエンド）、API（バックエンド）、連携部分は原則として別Issueで管理する**
- **1つのIssueには「1つの役割・責務」に集中する**（例：画面のUI、APIの設計、連携処理など）
- 連携が密な場合も、なるべく **「画面」「API」「連携」のタスクを分離** してIssueを作成する
- **関連Issue/PRは必ず相互にリンクする**（GitHubの自動リンクやコメント等）

## 完了条件（Definition of Done）

- 本作業契約の **出力形式**に準拠し、差分は **200 行以下**
- フォーマッタ／静的解析（例：Google Java Format / Checkstyle）を通過
- `SPEC.md` の該当節を参照し、README／INSTRUCTIONS からの導線がある
- 必要に応じて **テスト**を追加し、**再現手順**を明示
